<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon-01739711.svg" />
    
    
    
    <link rel="stylesheet" href="/assets/style-f855e479.css">
  <title>Router</title></head>
  <body> <a class="sr-only" href="#router">Skip to content</a> <div class="flex md:w-fit md:mx-auto"><nav id="toc" tabindex="-1" class="bg-slate-100 sr-only focus-within:not-sr-only focus-within:fixed focus-within:top-0 focus-within:left-0 focus-within:h-screen focus-within:w-64 focus-within:px-8 lg:not-sr-only lg:h-screen lg:w-64 lg:px-8 lg:!sticky lg:top-0 lg:left-0 lg:shrink-0 lg:shadow-[-99999px_0_0_99999px] lg:shadow-slate-100"><div class="sticky top-0"><a href="/" class="text-xl py-4 flex items-center border-b border-b-slate-300 " aria-hidden><img src="/assets/favicon-01739711.svg" alt="logo" width="32" height="32"> <span class="tracking-wide ml-2 text-slate-800" data-svelte-h="svelte-1hbur4j">Svelte Pilot</span></a> <ul class="py-4"><li class="mb-4"><span class="font-semibold text-slate-500 tracking-wider uppercase">Guide</span> <ul><li class="my-2"><a href="/en/introduction" class="text-slate-700 ">Introduction</a> </li><li class="my-2"><a href="/en/creating-a-project" class="text-slate-700 ">Creating a Project</a> </li><li class="my-2"><a href="/en/routing" class="text-slate-700 ">Routing</a> </li><li class="my-2"><a href="/en/ssr" class="text-slate-700 ">Server-Side Rendering</a> </li><li class="my-2"><a href="/en/template" class="text-slate-700 ">Template</a> </li></ul> </li><li class="mb-4"><span class="font-semibold text-slate-500 tracking-wider uppercase">Components</span> <ul><li class="my-2"><a href="/en/link" class="text-slate-700 ">&lt;Link></a> </li><li class="my-2"><a href="/en/client-app" class="text-slate-700 ">&lt;ClientApp></a> </li><li class="my-2"><a href="/en/server-app" class="text-slate-700 ">&lt;ServerApp></a> </li></ul> </li><li class="mb-4"><span class="font-semibold text-slate-500 tracking-wider uppercase">API</span> <ul><li class="my-2"><a href="/en/router" class="text-slate-700 font-semibold !text-[#FF3E00]">Router</a> </li></ul> </li></ul></div></nav> <main class="max-w-3xl min-w-0 p-4 sm:p-6 md:p-8"><div class="mb-4 flex justify-between"><div data-svelte-h="svelte-1y34zl4"><a href="#toc" aria-hidden class="lg:hidden"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"></path></svg></a></div> <div><a href="/zh-CN/router" class="text-[#FF3E00] ">中文</a></div></div>    <article class="prose prose-slate max-w-none prose-a:text-[#FF3E00] prose-code:before:content-none prose-code:after:content-none prose-code:bg-slate-100 prose-code:inline-block prose-code:rounded prose-code:px-1"><!-- HTML_TAG_START --><h1 id="router">Router</h1>
<h2 id="constructor">Constructor</h2>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">constructor</span><span style="color: #D4D4D4">({</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">routes</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">base</span><span style="color: #D4D4D4"> = </span><span style="color: #CE9178">&#39;&#39;</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">pathQuery</span><span style="color: #D4D4D4"> = </span><span style="color: #CE9178">&#39;&#39;</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">clientContext</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">callLoadOnClient</span><span style="color: #D4D4D4"> = </span><span style="color: #569CD6">false</span></span>
<span class="line"><span style="color: #D4D4D4">}: {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">routes:</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">ViewConfigGroup</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">base</span><span style="color: #D4D4D4">?: </span><span style="color: #9CDCFE">string</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">pathQuery</span><span style="color: #D4D4D4">?: </span><span style="color: #9CDCFE">string</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">clientContext</span><span style="color: #D4D4D4">?: </span><span style="color: #9CDCFE">unknown</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">callLoadOnClient</span><span style="color: #D4D4D4">?: </span><span style="color: #9CDCFE">boolean</span></span>
<span class="line"><span style="color: #D4D4D4">})</span></span></code></pre><h3 id="routes">routes</h3>
<p>The route configuration. Refer to <a href="routing">routing</a> for usage.</p>
<h3 id="base">base</h3>
<p>The base path of the application.</p>
<p>If your application is deployed in a subdirectory of a domain, like <code>https://www.example.com/app/</code>, in this case, the base path would be <code>/app/</code>. If you prefer the root path not to end with a slash, you can set the base without a trailing slash, like <code>/app</code>.</p>
<p>When you navigate to a URL, if you pass an absolute URL starting with the protocol (for example, <code>https://www.example.com/app/my-route</code>), the base path will be trimmed during matching. But if the path you pass does not include the protocol, like <code>/app/my-route</code>, the base path will not be trimmed. Example:</p>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">router</span><span style="color: #D4D4D4"> = </span><span style="color: #569CD6">new</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">Router</span><span style="color: #D4D4D4">({</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">base:</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&#39;/app&#39;</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">routes:</span><span style="color: #D4D4D4"> [</span></span>
<span class="line"><span style="color: #D4D4D4">    {</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #9CDCFE">path:</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&#39;/user&#39;</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #DCDCAA">component</span><span style="color: #9CDCFE">:</span><span style="color: #D4D4D4"> () </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">import</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&#39;./User.svelte&#39;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">    }</span></span>
<span class="line"><span style="color: #D4D4D4">  ]</span></span>
<span class="line"><span style="color: #D4D4D4">})</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">// Correct</span></span>
<span class="line"><span style="color: #9CDCFE">router</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">push</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&#39;http://127.0.0.1/app/user&#39;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">// Correct</span></span>
<span class="line"><span style="color: #9CDCFE">router</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">push</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&#39;/user&#39;</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">// Incorrect</span></span>
<span class="line"><span style="color: #9CDCFE">router</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">push</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&#39;/app/user&#39;</span><span style="color: #D4D4D4">)</span></span></code></pre><h3 id="pathquery">pathQuery</h3>
<p>Uses query parameters as the routing path. This feature can be useful when providing applications under the <code>file:</code> protocol, for example:</p>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">router</span><span style="color: #D4D4D4"> = </span><span style="color: #569CD6">new</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">Router</span><span style="color: #D4D4D4">({</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">pathQuery:</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&#39;__path__&#39;</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #6A9955">// ...</span></span>
<span class="line"><span style="color: #D4D4D4">})</span></span></code></pre><p>In the example above, if we visit <code>file:///path/to/index.html?__path__=/home</code>, the <code>/home</code> route will be matched.</p>
<h3 id="clientcontext">clientContext</h3>
<p>The <code>context</code> object when calling the <code>load</code> function on the client side. Creating this object might require client-specific APIs, so it is generally set in the <a href="#routerstart">Router.start()</a> method. Refer to <a href="ssr">server-side rendering</a> for usage.</p>
<h3 id="callloadonclient">callLoadOnClient</h3>
<p>Indicates whether to call the <code>load</code> function on the client side.</p>
<h2 id="current">current</h2>
<p>The current <a href="#route">Route</a> object. Available only on the client side.</p>
<h2 id="start">start()</h2>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">start</span><span style="color: #D4D4D4">(</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">onReady</span><span style="color: #D4D4D4">: () </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">void</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">clientContext</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">ssrState</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">path</span></span>
<span class="line"><span style="color: #D4D4D4">  }: {</span></span>
<span class="line"><span style="color: #D4D4D4">    clientContext?</span><span style="color: #9CDCFE">:</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">unknown</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">ssrState</span><span style="color: #D4D4D4">?: </span><span style="color: #9CDCFE">SSRState</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">path</span><span style="color: #D4D4D4">?: </span><span style="color: #9CDCFE">string</span><span style="color: #D4D4D4"> | </span><span style="color: #9CDCFE">Location</span></span>
<span class="line"><span style="color: #D4D4D4">  } = {}</span></span>
<span class="line"><span style="color: #D4D4D4">): </span><span style="color: #569CD6">void</span></span></code></pre><p>Starts the router. Available only in <code>client</code> mode.</p>
<h3 id="onready">onReady</h3>
<p>A callback function called when the router is ready. We need to create a <code>ClientApp</code> instance in this callback. Refer to <a href="creating-a-project">creating a new project</a> for usage.</p>
<h3 id="clientcontext-1">clientContext</h3>
<p>Sets the <code>clientContext</code> attribute of the <code>Router</code> instance.</p>
<h3 id="ssrstate">ssrState</h3>
<p>Provides the data returned by the server’s <code>load</code> function to the client for hydration.</p>
<h3 id="path">path</h3>
<p>Used to initialize the router&#39;s path. It can be a URL string or a <a href="#location">Location</a> type object. It defaults to the current webpage&#39;s URL. If the provided URL is different from the current webpage’s URL, it will call <code>Router.handleClient()</code> to render the corresponding route but not navigate. This parameter can be used to prevent page navigation, for instance, when the server renders a 404 or 500 page.</p>
<h2 id="handleclient">handleClient()</h2>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">handleClient</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">location</span><span style="color: #D4D4D4">: </span><span style="color: #9CDCFE">string</span><span style="color: #D4D4D4"> | </span><span style="color: #9CDCFE">Location</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">ssrState</span><span style="color: #D4D4D4">?: </span><span style="color: #9CDCFE">SSRState</span><span style="color: #D4D4D4">): </span><span style="color: #4EC9B0">Promise</span><span style="color: #D4D4D4">&lt;</span><span style="color: #9CDCFE">Route</span><span style="color: #D4D4D4"> | </span><span style="color: #569CD6">undefined</span><span style="color: #D4D4D4"> | </span><span style="color: #569CD6">false</span><span style="color: #D4D4D4">&gt;</span></span></code></pre><p>A router method used for handling navigation during client-side rendering. Use this method if you want to render a route but don’t want <code>history.pushState()</code> or <code>history.replaceState()</code> to be executed. If a <a href="#route">Route</a> type object is returned, it means the route was matched and successfully rendered. If <code>undefined</code> is returned, no route was matched. If <code>false</code> is returned, a route was matched but was intercepted by a route guard.</p>
<h2 id="handleserver">handleServer()</h2>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">handleServer</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">location</span><span style="color: #D4D4D4">: </span><span style="color: #9CDCFE">string</span><span style="color: #D4D4D4"> | </span><span style="color: #9CDCFE">Location</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">loadFunctionContext</span><span style="color: #D4D4D4">?: </span><span style="color: #9CDCFE">unknown</span><span style="color: #D4D4D4">): </span><span style="color: #4EC9B0">Promise</span><span style="color: #D4D4D4">&lt;</span><span style="color: #9CDCFE">Route</span><span style="color: #D4D4D4"> | </span><span style="color: #569CD6">undefined</span><span style="color: #D4D4D4">&gt;</span></span></code></pre><p>A router method used for handling requests during server-side rendering. Refer to <a href="ssr">server-side rendering</a> for details.</p>
<h2 id="parselocation">parseLocation()</h2>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">parseLocation</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">location</span><span style="color: #D4D4D4">: </span><span style="color: #9CDCFE">string</span><span style="color: #D4D4D4"> | </span><span style="color: #9CDCFE">Location</span><span style="color: #D4D4D4">): </span><span style="color: #9CDCFE">Pick</span><span style="color: #D4D4D4">&lt;</span><span style="color: #9CDCFE">Route</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&quot;path&quot;</span><span style="color: #D4D4D4"> | </span><span style="color: #CE9178">&quot;query&quot;</span><span style="color: #D4D4D4"> | </span><span style="color: #CE9178">&quot;search&quot;</span><span style="color: #D4D4D4"> | </span><span style="color: #CE9178">&quot;hash&quot;</span><span style="color: #D4D4D4"> | </span><span style="color: #CE9178">&quot;state&quot;</span><span style="color: #D4D4D4"> | </span><span style="color: #CE9178">&quot;href&quot;</span><span style="color: #D4D4D4">&gt;</span></span></code></pre><p>Parses a <a href="#location">Location</a> type object or URL string and returns a subset of the <a href="#route">Route</a> object:</p>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">{</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">path</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">query</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">search</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">hash</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">state</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">href</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre><h2 id="href">href()</h2>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">href</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">location</span><span style="color: #D4D4D4">: </span><span style="color: #9CDCFE">string</span><span style="color: #D4D4D4"> | </span><span style="color: #9CDCFE">Location</span><span style="color: #D4D4D4">): </span><span style="color: #9CDCFE">string</span></span></code></pre><p>A URL string that can be assigned to the <code>href</code> attribute of an <code>&lt;a&gt;</code> tag and the <code>location.href</code> attribute. If your router is based on <code>pathQuery</code>, it will include <code>search</code> and <code>hash</code> but not <code>path</code>, because routers based on <code>pathQuery</code> do not care about the path.</p>
<h2 id="push">push()</h2>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">push</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">location</span><span style="color: #D4D4D4">: </span><span style="color: #9CDCFE">string</span><span style="color: #D4D4D4"> | </span><span style="color: #9CDCFE">Location</span><span style="color: #D4D4D4">): </span><span style="color: #4EC9B0">Promise</span><span style="color: #D4D4D4">&lt;</span><span style="color: #569CD6">void</span><span style="color: #D4D4D4">&gt;</span></span></code></pre><p>Navigates to <code>location</code> and calls <code>history.pushState()</code> to change the current page&#39;s URL.</p>
<h2 id="replace">replace()</h2>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">replace</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">location</span><span style="color: #D4D4D4">: </span><span style="color: #9CDCFE">string</span><span style="color: #D4D4D4"> | </span><span style="color: #9CDCFE">Location</span><span style="color: #D4D4D4">): </span><span style="color: #4EC9B0">Promise</span><span style="color: #D4D4D4">&lt;</span><span style="color: #569CD6">void</span><span style="color: #D4D4D4">&gt;</span></span></code></pre><p>Navigates to <code>location</code> and calls <code>history.replaceState()</code> to change the current page&#39;s URL.</p>
<h2 id="setstate">setState()</h2>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">setState</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">state</span><span style="color: #D4D4D4">: </span><span style="color: #9CDCFE">Record</span><span style="color: #D4D4D4">&lt;</span><span style="color: #9CDCFE">string</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">unknown</span><span style="color: #D4D4D4">&gt;): </span><span style="color: #569CD6">void</span></span></code></pre><p>Merges <code>state</code> into the current route’s <code>state</code> and calls <code>history.replaceState()</code>.</p>
<h2 id="go">go()</h2>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">go</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">position</span><span style="color: #D4D4D4">: </span><span style="color: #9CDCFE">number</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">state</span><span style="color: #D4D4D4">?: </span><span style="color: #9CDCFE">Record</span><span style="color: #D4D4D4">&lt;</span><span style="color: #9CDCFE">string</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">unknown</span><span style="color: #D4D4D4">&gt;): </span><span style="color: #569CD6">void</span></span></code></pre><p>Calls <code>history.go()</code>. If <code>state</code> is set, it will merge <code>state</code> into the destination route’s <code>state</code> and call <code>history.replaceState()</code>.</p>
<h2 id="back">back()</h2>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">back</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">state</span><span style="color: #D4D4D4">?: </span><span style="color: #9CDCFE">Record</span><span style="color: #D4D4D4">&lt;</span><span style="color: #9CDCFE">string</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">unknown</span><span style="color: #D4D4D4">&gt;): </span><span style="color: #569CD6">void</span></span></code></pre><p>An alias for <code>router.go(-1, state)</code>.</p>
<h2 id="forward">forward()</h2>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #DCDCAA">forward</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">state</span><span style="color: #D4D4D4">?: </span><span style="color: #9CDCFE">Record</span><span style="color: #D4D4D4">&lt;</span><span style="color: #9CDCFE">string</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">unknown</span><span style="color: #D4D4D4">&gt;): </span><span style="color: #569CD6">void</span></span></code></pre><p>An alias for <code>router.go(1, state)</code>.</p>
<h2 id="on">on()</h2>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #9CDCFE">router</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">on</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&#39;beforeChange&#39;</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">handler</span><span style="color: #D4D4D4">: </span><span style="color: #9CDCFE">NavigationGuard</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #9CDCFE">router</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">on</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&#39;beforeCurrentRouteLeave&#39;</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">handler</span><span style="color: #D4D4D4">: </span><span style="color: #9CDCFE">NavigationGuard</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #9CDCFE">router</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">on</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&#39;update&#39;</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">handler</span><span style="color: #D4D4D4">: </span><span style="color: #9CDCFE">UpdateHandler</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #9CDCFE">router</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">on</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&#39;afterChange&#39;</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">handler</span><span style="color: #D4D4D4">: </span><span style="color: #9CDCFE">AfterChangeHandler</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #9CDCFE">router</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">on</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&#39;error&#39;</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">handler</span><span style="color: #D4D4D4">: </span><span style="color: #9CDCFE">ErrorHandler</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">type</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">NavigationGuardResult</span><span style="color: #D4D4D4"> = </span><span style="color: #4EC9B0">void</span><span style="color: #D4D4D4"> | </span><span style="color: #4EC9B0">boolean</span><span style="color: #D4D4D4"> | </span><span style="color: #4EC9B0">string</span><span style="color: #D4D4D4"> | </span><span style="color: #4EC9B0">Location</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">type</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">NavigationGuard</span><span style="color: #D4D4D4"> = (</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">to</span><span style="color: #D4D4D4">: </span><span style="color: #4EC9B0">Route</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">from</span><span style="color: #D4D4D4">?: </span><span style="color: #4EC9B0">Route</span></span>
<span class="line"><span style="color: #D4D4D4">) </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">NavigationGuardResult</span><span style="color: #D4D4D4"> | </span><span style="color: #4EC9B0">Promise</span><span style="color: #D4D4D4">&lt;</span><span style="color: #4EC9B0">NavigationGuardResult</span><span style="color: #D4D4D4">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">type</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">AfterChangeHandler</span><span style="color: #D4D4D4"> = (</span><span style="color: #9CDCFE">to</span><span style="color: #D4D4D4">: </span><span style="color: #4EC9B0">Route</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">from</span><span style="color: #D4D4D4">?: </span><span style="color: #4EC9B0">Route</span><span style="color: #D4D4D4">) </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">void</span></span>
<span class="line"><span style="color: #569CD6">type</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">UpdateHandler</span><span style="color: #D4D4D4"> = (</span><span style="color: #9CDCFE">route</span><span style="color: #D4D4D4">: </span><span style="color: #4EC9B0">Route</span><span style="color: #D4D4D4">) </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">void</span></span>
<span class="line"><span style="color: #569CD6">type</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">ErrorHandler</span><span style="color: #D4D4D4"> = (</span><span style="color: #9CDCFE">error</span><span style="color: #D4D4D4">: </span><span style="color: #4EC9B0">unknown</span><span style="color: #D4D4D4">) </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">void</span></span></code></pre><p>Listens to router events.</p>
<h3 id="beforechange">beforeChange</h3>
<p>Triggered before the route changes. For detailed usage, refer to <a href="routing#route-guards">Route Guards</a>.</p>
<h3 id="beforecurrentrouteleave">beforeCurrentRouteLeave</h3>
<p>Triggered before leaving the current route. The event handler is only registered in the current route and will be removed once the route changes.</p>
<h3 id="update">update</h3>
<p>Triggered when the new route is successfully loaded.</p>
<h3 id="afterchange">afterChange</h3>
<p>Triggered after the route changes.</p>
<h3 id="error">error</h3>
<p>Triggered when an error occurs during the route change.</p>
<h3 id="event-trigger-sequence">Event Trigger Sequence</h3>
<ol>
<li>Call the <code>beforeLeave</code> event handlers in the view tree of the route that is about to be left.</li>
<li>Call the <code>beforeCurrentRouteLeave</code> event handler.</li>
<li>Call the <code>beforeChange</code> event handler.</li>
<li>Call the <code>beforeEnter</code> event handlers in the view tree of the incoming route.</li>
<li>Call the <code>beforeEnter</code> event handler exported in the <code>&lt;script context=&quot;module&quot;&gt;</code> of synchronously loaded Svelte components.</li>
<li>Call the <code>beforeEnter</code> event handler exported in the <code>&lt;script context=&quot;module&quot;&gt;</code> of asynchronously loaded Svelte components.</li>
<li>Call the <code>update</code> event handler.</li>
<li>Call the <code>afterChange</code> event handler.</li>
</ol>
<h2 id="off">off()</h2>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #9CDCFE">router</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">off</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">event</span><span style="color: #D4D4D4">: </span><span style="color: #9CDCFE">Event</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">handler</span><span style="color: #D4D4D4">: </span><span style="color: #9CDCFE">EventHandler</span><span style="color: #D4D4D4">)</span></span></code></pre><p>Removes the event listener from the router.</p>
<h2 id="once">once()</h2>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #9CDCFE">router</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">once</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">event</span><span style="color: #D4D4D4">: </span><span style="color: #9CDCFE">Event</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">handler</span><span style="color: #D4D4D4">: </span><span style="color: #9CDCFE">EventHandler</span><span style="color: #D4D4D4">)</span></span></code></pre><p>Listens to a router event, but will be triggered only once.</p>
<h2 id="route">Route</h2>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">type</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">Route</span><span style="color: #D4D4D4"> = {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">path</span><span style="color: #D4D4D4">: </span><span style="color: #4EC9B0">string</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">query</span><span style="color: #D4D4D4">: </span><span style="color: #4EC9B0">StringCaster</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">search</span><span style="color: #D4D4D4">: </span><span style="color: #4EC9B0">string</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">hash</span><span style="color: #D4D4D4">: </span><span style="color: #4EC9B0">string</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">state</span><span style="color: #D4D4D4">: </span><span style="color: #4EC9B0">Record</span><span style="color: #D4D4D4">&lt;</span><span style="color: #4EC9B0">string</span><span style="color: #D4D4D4">, </span><span style="color: #4EC9B0">unknown</span><span style="color: #D4D4D4">&gt;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">params</span><span style="color: #D4D4D4">: </span><span style="color: #4EC9B0">StringCaster</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">meta</span><span style="color: #D4D4D4">: </span><span style="color: #4EC9B0">Record</span><span style="color: #D4D4D4">&lt;</span><span style="color: #4EC9B0">string</span><span style="color: #D4D4D4">, </span><span style="color: #4EC9B0">unknown</span><span style="color: #D4D4D4">&gt;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">href</span><span style="color: #D4D4D4">: </span><span style="color: #4EC9B0">string</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">ssrState</span><span style="color: #D4D4D4">: </span><span style="color: #4EC9B0">SSRState</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre><p>The <code>Route</code> type object describes the information of the matched route. It consists of the following properties:</p>
<h3 id="path-1">path</h3>
<p>A string starting with <code>/</code>, excluding the query string or fragment identifier.</p>
<h3 id="query">query</h3>
<p>A <a href="https://github.com/jiangfengming/cast-string#stringcaster">StringCaster</a> object containing the query parameters.</p>
<h3 id="search">search</h3>
<p>A string starting with <code>?</code>, representing the URL query string.</p>
<h3 id="hash">hash</h3>
<p>A string starting with <code>#</code>, followed by the URL fragment identifier.</p>
<h3 id="state">state</h3>
<p>A <a href="https://developer.mozilla.org/en-US/docs/Web/API/History/state">history.state</a> object.</p>
<h3 id="params">params</h3>
<p>A <a href="https://github.com/jiangfengming/cast-string#stringcaster">StringCaster</a> object containing the path parameters.</p>
<h3 id="meta">meta</h3>
<p>A plain object used for sharing information between view configurations.</p>
<h3 id="href-1">href</h3>
<p>A URL string that can be assigned to the <code>href</code> attribute of an <code>&lt;a&gt;</code> tag and the <code>location.href</code> attribute. If your router is based on <code>pathQuery</code>, it will include <code>search</code> and <code>hash</code> but not <code>path</code>, as routers based on <code>pathQuery</code> are not concerned with the path.</p>
<h3 id="ssrstate-1">ssrState</h3>
<p>A JSON serializable object used for passing data during server-side rendering and client-side hydration.</p>
<h2 id="location">Location</h2>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #569CD6">type</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">Location</span><span style="color: #D4D4D4"> = {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">path</span><span style="color: #D4D4D4">: </span><span style="color: #4EC9B0">string</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">params</span><span style="color: #D4D4D4">?: </span><span style="color: #4EC9B0">Record</span><span style="color: #D4D4D4">&lt;</span><span style="color: #4EC9B0">string</span><span style="color: #D4D4D4">, </span><span style="color: #4EC9B0">string</span><span style="color: #D4D4D4"> | </span><span style="color: #4EC9B0">number</span><span style="color: #D4D4D4"> | </span><span style="color: #4EC9B0">boolean</span><span style="color: #D4D4D4">&gt;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">query</span><span style="color: #D4D4D4">?: </span><span style="color: #4EC9B0">Record</span><span style="color: #D4D4D4">&lt;</span><span style="color: #4EC9B0">string</span><span style="color: #D4D4D4">, </span><span style="color: #4EC9B0">PrimitiveType</span><span style="color: #D4D4D4"> | </span><span style="color: #4EC9B0">PrimitiveType</span><span style="color: #D4D4D4">[]&gt; | </span><span style="color: #4EC9B0">URLSearchParams</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">hash</span><span style="color: #D4D4D4">?: </span><span style="color: #4EC9B0">string</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">state</span><span style="color: #D4D4D4">?: </span><span style="color: #4EC9B0">Record</span><span style="color: #D4D4D4">&lt;</span><span style="color: #4EC9B0">string</span><span style="color: #D4D4D4">, </span><span style="color: #4EC9B0">unknown</span><span style="color: #D4D4D4">&gt;</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre><p>The <code>Location</code> type object is used to describe the destination of navigation. It can consist of the following properties:</p>
<h3 id="path-2">path</h3>
<p>A string starting with <code>/</code>. It can include a query string and fragment identifier, but it&#39;s not recommended, as you&#39;ll need to handle encoding manually.</p>
<h3 id="params-1">params</h3>
<p>Path parameters. A key-value pair object used to fill the parameter placeholders in <code>path</code>. For example, <code>{ path: &#39;/articles/:id&#39;, params: { id: 123 } }</code> is equivalent to <code>{ path: &#39;/articles/123&#39; }</code>. Using <code>params</code> is safer than manually concatenating strings, as the parameter values are automatically encoded with <code>encodeURIComponent()</code>.</p>
<h3 id="query-1">query</h3>
<p>Query parameters. If a plain object is provided, its format is similar to the return value of the <a href="https://nodejs.org/api/querystring.html#querystring_querystring_parse_str_sep_eq_options">parse()</a> method of the <a href="https://nodejs.org/api/querystring.html">querystring</a> module:</p>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #D4D4D4">{</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C8C8C8">foo</span><span style="color: #D4D4D4">: </span><span style="color: #CE9178">&#39;bar&#39;</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C8C8C8">abc</span><span style="color: #D4D4D4">: [</span><span style="color: #CE9178">&#39;xyz&#39;</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">&#39;123&#39;</span><span style="color: #D4D4D4">]</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre><h3 id="hash-1">hash</h3>
<p>A string starting with <code>#</code>, followed by the URL fragment identifier.</p>
<h3 id="state-1">state</h3>
<p>Used to set <code>history.state</code>.</p>
<h2 id="miscellaneous">Miscellaneous</h2>
<h3 id="accessing-router-instance-and-route-store-from-component-context">Accessing <code>Router</code> Instance and <code>$route</code> Store from Component Context</h3>
<p>Although rarely needed, you can access the <code>Router</code> instance and <code>$route</code> store from the component context:</p>
<pre class="not-prose overflow-auto p-4 leading-normal rounded" style="background-color: #1E1E1E" tabindex="0"><code><span class="line"><span style="color: #808080">&lt;</span><span style="color: #569CD6">script</span><span style="color: #808080">&gt;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">import</span><span style="color: #D4D4D4"> { </span><span style="color: #9CDCFE">getContext</span><span style="color: #D4D4D4"> } </span><span style="color: #C586C0">from</span><span style="color: #D4D4D4"> </span><span style="color: #CE9178">&#39;svelte&#39;</span><span style="color: #D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">router</span><span style="color: #D4D4D4"> = </span><span style="color: #DCDCAA">getContext</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&#39;__SVELTE_PILOT_ROUTER__&#39;</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">router</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">push</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&#39;/foo&#39;</span><span style="color: #D4D4D4">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">routeStore</span><span style="color: #D4D4D4"> = </span><span style="color: #DCDCAA">getContext</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">&#39;__SVELTE_PILOT_ROUTE__&#39;</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">console</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">log</span><span style="color: #D4D4D4">($</span><span style="color: #9CDCFE">routeStore</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">path</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #808080">&lt;/</span><span style="color: #569CD6">script</span><span style="color: #808080">&gt;</span></span></code></pre><p>For instance, the <code>&lt;Link&gt;</code> component accesses the <code>Router</code> instance in this way.</p>
<!-- HTML_TAG_END --></article> <div class="mt-5 text-slate-600"><a href="https://github.com/svelte-pilot/svelte-pilot.github.io/edit/main/docs/en/router.md">Edit this page on GitHub</a></div> <div class="flex justify-between border-t border-t-slate-300 mt-6 py-3"><div><a href="/en/server-app" class="text-[#FF3E00] ">← &lt;ServerApp></a></div> <div></div></div></main> <aside class="sr-only xl:not-sr-only xl:w-64 xl:px-8 xl:shrink-0"><div class="sticky top-0"><h2 class="font-semibold text-slate-500 tracking-widest uppercase pt-8 pb-4">On this page</h2> <ul><li class="my-2"><a href="#router" class="text-slate-800">Router</a> </li><li class="my-2"><a href="#constructor" class="text-slate-800">Constructor</a> </li><li class="my-2"><a href="#current" class="text-slate-800">current</a> </li><li class="my-2"><a href="#start" class="text-slate-800">start()</a> </li><li class="my-2"><a href="#handleclient" class="text-slate-800">handleClient()</a> </li><li class="my-2"><a href="#handleserver" class="text-slate-800">handleServer()</a> </li><li class="my-2"><a href="#parselocation" class="text-slate-800">parseLocation()</a> </li><li class="my-2"><a href="#href" class="text-slate-800">href()</a> </li><li class="my-2"><a href="#push" class="text-slate-800">push()</a> </li><li class="my-2"><a href="#replace" class="text-slate-800">replace()</a> </li><li class="my-2"><a href="#setstate" class="text-slate-800">setState()</a> </li><li class="my-2"><a href="#go" class="text-slate-800">go()</a> </li><li class="my-2"><a href="#back" class="text-slate-800">back()</a> </li><li class="my-2"><a href="#forward" class="text-slate-800">forward()</a> </li><li class="my-2"><a href="#on" class="text-slate-800">on()</a> </li><li class="my-2"><a href="#off" class="text-slate-800">off()</a> </li><li class="my-2"><a href="#once" class="text-slate-800">once()</a> </li><li class="my-2"><a href="#route" class="text-slate-800">Route</a> </li><li class="my-2"><a href="#location" class="text-slate-800">Location</a> </li><li class="my-2"><a href="#miscellaneous" class="text-slate-800">Miscellaneous</a> </li></ul></div></aside></div></body>
</html>
